% 1.) The document uses graphviz which generates .ps files and
%     auto-pst-pdf to convert to pdf.
%     => Build command needs an update:
%        --enable-write18
%     Example:
%       pdflatex -synctex=1 -interaction=nonstopmode --enable-write18 FILE.tex
%If using an editor to build the document, enable shell escape:
%	--shell-escape
%	Example (under "Engines" in TexShop Preferences):
%pdflatex --file-line-error --synctex=1 --enable-write18 --shell-escape
 %2.) Execute sage:
%     a.) build latex
%     b.) sage moonmath.sagetex.sage
%     c.) build latex again MANY TIMES! (3x according to Mirco)


\documentclass[a4paper,oneside,12pt]{book}

%margins
\usepackage[a4paper, margin=2.5cm]{geometry}

%headers and footers
\usepackage{fancyhdr}%version 4.0.1 or above should be used
\pagestyle{fancy}

\fancyhead[L]{\leftmark}%current chapter
\fancyhead[R]{\rightmark}%current section

\fancyfoot{}%cancel default footer
\fancyfoot[C]{\thepage}%footer center

% Use listings for all algorithms?
\usepackage{listings}

%fonts
% times is the font I (Mirco) thinks looks the most calm, ordered and math-textbook like
\usepackage{times}
% use times style for mathmode, too
\usepackage{mathptmx}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

% integer long division
\usepackage{longdivision}
% polynomial long division
\usepackage{polynom}

\usepackage{amssymb,amsmath,amsthm,mathrsfs,xspace}
\usepackage{polydiv}
\usepackage{amscd}
\usepackage[all]{xy}
\usepackage{comment}

\usepackage{algorithm}
\usepackage{algpseudocode}
% We use algorithmicX, since we need to customize commands (\algblockdefx)
% See https://ftp.agdsn.de/pub/mirrors/latex/dante/macros/latex/contrib/algorithmicx/algorithmicx.pdf for howTo customize
\usepackage{algorithmicx}

% writing complex graphs by hand is tedious and often not visually optimal
% let graphviz handle this
% graphs are written in the 'dot'-language
\usepackage[singlefile, pdf,tmpdir]{graphviz}
%\usepackage{auto-pst-pdf}

\usepackage{enumitem} % for personalizing enumeration with itemize

% the sagetex evironment
\usepackage{sagetex}
% long numbers need proper line break in sage environment
% from https://ask.sagemath.org/question/53064/sagetex-linebreak/
\usepackage{seqsplit}
\lstset{
literate=
{1}{1\allowbreak}1
{2}{2\allowbreak}1
{3}{3\allowbreak}1
{4}{4\allowbreak}1
{5}{5\allowbreak}1
{6}{6\allowbreak}1
{7}{7\allowbreak}1
{8}{8\allowbreak}1
{9}{9\allowbreak}1
{0}{0\allowbreak}1,
breaklines=true}
% sagecommandline color sheme
\usepackage{xcolor}
% color of the sagecommandline-tex-environment
\lstset{language=Sage,
commentstyle={\ttfamily\color{black}},
keywordstyle={\ttfamily\color{black}\bfseries},
stringstyle ={\ttfamily\color{black}\bfseries},
tabsize = 4,
basicstyle={\small \ttfamily},
backgroundcolor= \color{white},
}

\usepackage{tabularx}

%Load the following packages last
\usepackage{hyperref} % for all kinds of links
\usepackage{cleveref}%must be loaded after `hyperref`


%bibliography management
\usepackage{natbib}
\bibliographystyle{unsrtnat}%we can discuss what style we want to use

%math typesetting
\usepackage{amsfonts}

% Table of Contents

\setcounter{tocdepth}{4}

%	Macros
% Fields and categories
\newcommand{\C}{\mathbb{C}}
\newcommand{\G}{\mathbb{G}}
\newcommand{\Prim}{\mathbb{P}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\NN}{\mathbb{N}_0}
\newcommand{\K}{\mathbb{K}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\X}{\mathfrak{X}}
\newcommand{\Oinf}{\mathcal{O}}

\newcommand{\Zdiv}[2]{#1 \text{ div } #2}
\newcommand{\Zmod}[2]{#1 \text{ mod } #2}
\newcommand{\kongru}[3]{#1 \equiv #2 \quad \text{( mod } #3 \text{ )}}

% inline code
\newcommand{\icode}[1]{\lstinline{#1}}

% theorem styles
\theoremstyle{remark}
\newtheorem{theorem}{Theorem}[subsection]
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{conjecture}{Conjecture}
\newtheorem{remark}{Remark}
\newtheorem{notation}{Notation and Symbols}

% Examples get their own counter
\newcounter{ExampleCounter}
\newtheorem{example}[ExampleCounter]{Example}

% Exercises get their own counter
\newcounter{ExerciseCounter}
\newtheorem{exercise}[ExerciseCounter]{Exercise}

% Jargon get their own counter
\newcounter{JargonCounter}
\newtheorem{jargon}[JargonCounter]{Jargon}

% algorithmicx commands
%\algnewcommand\algorithmicinput{\textbf{Statement:}}
%\algnewcommand\Statement{\item[\algorithmicinput]}

%colors
\definecolor{la-purple}{HTML}{312265}%primary purple
\definecolor{la-purple-med}{HTML}{594982}%primary purple at 80%
\definecolor{la-purple-light}{HTML}{D3CDDE}%primary purple at 20%

%text highlighting
\usepackage[textwidth=2cm,textsize=small,colorinlistoftodos]{todonotes}
\newcommand{\tbds}[1]{\textcolor{orange}{#1}\todo{#1}}%notes to self/TBD for Sylvia – the argument of the command is repeated on purpose to appear in both the inline text and the margin note/list of to do items
\newcommand{\tbdsmarg}[1]{\todo[color=orange]{#1}}%notes to self/TBD for Sylvia – margin-only version
\newcommand{\tbdslong}[1]{\textcolor{orange}{#1}}%longer inline notes to self/TBD for Sylvia
\newcommand{\sme}[1]{\todo[color=green]{#1}}%comments/questions for subject matter experts
\newcommand{\smelong}[1]{\textcolor{green}{#1}}%longer inline comments/questions for subject matter experts
\newcommand{\hilight}[1]{\textbf{#1}}%basically, our own version of \emph. we can decide later if it'll be italic, boldface or a highlight color
\newcommand{\term}[1]{\textbf{#1}}%technical terms that are being defined
\newcommand{\uterm}[1]{\textcolor{red}{#1}\todo[color=red]{#1}}%new terms introduced in the text that have not been defined or are not being defined. Note: these are only highlighted when they are used in non-meta text, e.g. not in the text outlining the structure of the chapter ahead.  The argument of the command is repeated on purpose to appear in both the inline text and the margin note/list of to do items
\newcommand{\utermlong}[1]{\textcolor{red}{#1}}%longer inline notes to self/TBD for Sylvia
\newcommand{\comms}[1]{\textcolor{la-purple-med}{#1}\todo[color=la-purple-med,textcolor=white]{#1}}%new terms introduced in the text that have not been defined or are not being defined. Note: these are only highlighted when they are used in non-meta text, e.g. not in the text outlining the structure of the chapter ahead.  The argument of the command is repeated on purpose to appear in both the inline text and the margin note/list of to do items
\newcommand{\commslong}[1]{\textcolor{la-purple}{#1}}%longer inline notes to self/TBD for Sylvia


\title{MoonMath manual}
\author{TechnoBob and the Least Scruples crew}
\date{\today}

%only typesets the chapters specified here, but keeps the TOC, page and section numbering, etc. comment the following line out if you want the whole book to be typeset; modify file names accordingly if you want to typeset other chapters
%\includeonly{chapters/ops-notes-moonmath,chapters/elliptic-curves-moonmath}


\begin{document}
% set the language for the listings package
\lstset{language=python }

\frontmatter
\include{chapters/ops-notes-moonmath}

\mainmatter

\maketitle
\tableofcontents
\include{chapters/intro-moonmath}
\include{chapters/preliminaries-moonmath}
\include{chapters/arithmetics-moonmath}
\include{chapters/algebra-moonmath}
\include{chapters/elliptic-curves-moonmath}
\include{chapters/statements}
\include{chapters/circuit-compiler}
\include{chapters/proof-systems}
\include{chapters/exercise-solutions-moonmath}


\bibliography{moonmath}%use `moonmath.bib` to look for references, and print bibliography at this point in the document

\end{document}
